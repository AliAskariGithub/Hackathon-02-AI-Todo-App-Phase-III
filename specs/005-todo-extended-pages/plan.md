# Implementation Plan: Extended Pages & Carousel

**Feature**: Extended Pages & Carousel
**Branch**: 005-todo-extended-pages
**Created**: 2026-02-05
**Status**: Draft

## Technical Context

### Architecture Overview
The Extended Pages & Carousel feature will implement several new components and pages:
- A testimonial carousel with automated rotation and smooth transitions
- New Contact and User Settings pages
- An enhanced footer with navigation and social links
- Custom authentication pages that replace the default Better Auth UI

### Dependencies
- `framer-motion`: For carousel animations and transitions
- `better-auth`: For authentication functionality and session management
- `lucide-react`: For icons (already in the project)
- Shadcn UI components: For consistent UI elements (Form, Input, Tabs)
- `next/link`: For navigation between pages
- `next-themes`: For theme management (already in use)

### Technology Choices
- **Carousel Engine**: Framer Motion for smooth animations with useEffect for timer management
- **State Management**: React hooks for local state, Better Auth useSession for authentication state
- **Form Handling**: Shadcn Form with Zod validation
- **Responsive Design**: Tailwind CSS with mobile-first approach
- **Icon Library**: Lucide React for consistent iconography

### Unknowns/Clarifications Needed
- [RESOLVED]: Specific implementation details for Better Auth custom routes at `/login` and `/signup` - using authClient.signIn.email() and authClient.signUp.email()
- [RESOLVED]: Approach for handling carousel overflow when testimonials don't divide evenly by 3 - padding with empty placeholders to maintain grid consistency
- [RESOLVED]: Decision between Server Actions vs traditional API fetches for settings page updates - using Server Actions for optimal Next.js 16+ integration

## Constitution Check

### Agentic Autonomy
- [x] Plan will be generated by Claude Code using Spec-Kit Plus workflow
- [x] No manual code generation during development process
- [x] All changes will be logged via agentic tasks

### Live Documentation
- [x] Will use Context7 MCP Server for real-time documentation on Next.js 16.1.2
- [x] Will fetch accurate technical information for Better Auth and Framer Motion
- [x] Will verify compatibility between technologies

### Secure by Default
- [x] Route protection for /settings using authentication middleware
- [x] Secure session management through Better Auth
- [x] Form validation and sanitization for contact page

### Modernity
- [x] Will leverage Next.js 16.1.2 App Router features
- [x] Will implement modern UI patterns with Framer Motion
- [x] Will use latest Shadcn UI components

### Tech Stack Compliance
- [x] Will use Next.js 16.1.2 (as required)
- [x] Will integrate with existing Shadcn UI components
- [x] Will maintain compatibility with existing tech stack

### UI/UX Standards
- [x] Will implement responsive design
- [x] Will ensure mobile-first approach
- [x] Will maintain accessibility standards
- [x] Will implement respect for reduced motion preferences

## Gates (Pass/Fail)

### Gate 1: Architecture Compatibility
- **Status**: PASS
- **Justification**: All proposed technologies are compatible with Next.js 16.1.2 and existing stack

### Gate 2: Security Compliance
- **Status**: PASS
- **Justification**: Route protection for settings page and authentication integration are secure implementations

### Gate 3: Performance Impact
- **Status**: PASS
- **Justification**: Carousel animations will use optimized motion properties with 60fps targets

### Gate 4: Dependency Conflicts
- **Status**: PASS
- **Justification**: Proposed dependencies are standard and shouldn't conflict with existing ones

## Phase 0: Research & Discovery

### Research Tasks
1. **Better Auth Custom Routes Research**
   - Task: Research proper implementation of custom login/signup routes with authClient
   - Task: Verify compatibility with existing auth patterns in the project

2. **Carousel Overflow Research**
   - Task: Determine best approach for handling testimonials that don't divide evenly by 3
   - Task: Research pagination and chunking patterns for carousels

3. **Settings State Management Research**
   - Task: Compare Server Actions vs traditional API fetches for settings updates
   - Task: Research Better Auth session synchronization patterns

4. **Framer Motion Carousel Research**
   - Task: Research best practices for automated carousel transitions
   - Task: Verify AnimatePresence implementation for preventing layout jumps

5. **Form Validation Research**
   - Task: Research Zod validation patterns with Shadcn Form
   - Task: Verify accessibility patterns for form validation

## Phase 1: Design & Architecture

### Data Model Updates
None required - this is a UI enhancement feature

### API Contract Updates
None required - this is a UI enhancement feature

### Component Architecture

#### Carousel Component
- **Location**: `components/testimonials/carousel.tsx`
- **Purpose**: Display 3 testimonials at a time with automatic rotation
- **Implementation**: Use Framer Motion with useEffect timer and AnimatePresence

#### Contact Page
- **Location**: `app/contact/page.tsx`
- **Purpose**: Allow users to submit contact information
- **Implementation**: Shadcn Form with Zod validation

#### Settings Page
- **Location**: `app/settings/page.tsx`
- **Purpose**: Allow authenticated users to update profile and preferences
- **Implementation**: Tabbed UI with Better Auth session integration

#### Footer Component
- **Location**: `components/footer.tsx`
- **Purpose**: Persistent navigation and social links
- **Implementation**: Multi-column responsive layout with Next.js Link components

#### Auth Override Components
- **Locations**: `app/login/page.tsx`, `app/signup/page.tsx`
- **Purpose**: Custom authentication UI with Electric Lime theme
- **Implementation**: Better Auth client integration with custom styling

## Phase 2: Implementation Plan

### Sprint 1: Foundation
1. Create Carousel component with motion and auto-rotation
2. Set up proxy.ts to protect /settings route
3. Create Footer component with navigation and social links

### Sprint 2: Core Pages
1. Implement Contact page with form validation
2. Implement Settings page with tabbed UI
3. Connect settings to Better Auth session

### Sprint 3: Auth Enhancement
1. Create custom Login page with Electric Lime theme
2. Create custom Signup page with Electric Lime theme
3. Connect auth pages to Better Auth client

### Sprint 4: Polishing & Testing
1. Accessibility testing for all new components
2. Responsive design validation
3. Carousel performance optimization
4. Form validation and error handling

## Risk Assessment

### High-Risk Items
- Authentication integration with custom routes
- Carousel performance on mobile devices
- Form validation patterns with Shadcn components

### Mitigation Strategies
- Test auth flow thoroughly with different user states
- Optimize carousel for 60fps performance with motion properties
- Implement proper error handling and user feedback

## Success Criteria Alignment

### From Feature Spec
- ✓ Testimonials rotate automatically every 5 seconds
- ✓ Clicking "Settings" redirects to User Settings page
- ✓ Footer is fully responsive on mobile devices
- ✓ Auth pages feel integrated with Electric Lime theme
- ✓ Carousel prevents layout jumps during transitions
- ✓ Settings page requires authentication

### Additional Technical Criteria
- Components are accessible and respect user preferences (reduced motion)
- Forms provide clear validation feedback
- Route protection works correctly
- Carousel performance remains above 60fps on target devices